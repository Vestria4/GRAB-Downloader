<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrabVR Level Downloader</title>
    <script>
        async function download(link) {
            let SERVER_URL = 'https://api.slin.dev/grab/v1/';
            let id = link.split('=')[1];
            let response = await fetch(SERVER_URL + 'details/' + id.replace(':', '/'));
            let details = await response.json();
            let iteration = await details.iteration;
            link = SERVER_URL + 'download/' + id.replace(':', '/') + '/' + iteration;

            let fileResponse = await fetch(link);
            let fileBlob = await fileResponse.blob();
            let url = window.URL.createObjectURL(fileBlob);
            let a = document.createElement('a');
            a.href = url;
            a.download = iteration + '.level';
            a.click();
        }
    </script>
</head>
<body>
    <h1>GrabVR Level Downloader</h1>
    <label for="inputUrl">Enter GrabVR Level Link:</label>
    <input type="text" id="inputUrl" placeholder="https://grabvr.quest/levels/viewer/?level=...">
    <button onclick="download(document.getElementById('inputUrl').value)">Download Level</button>
</body>
</html>
