function download(link) {
    let SERVER_URL = 'https://api.slin.dev/grab/v1/';
    let id = link.split('=')[1];
    fetch(SERVER_URL + 'details/' + id.replace(':', '/'))
        .then(response => response.json())
        .then(details => {
            let iteration = details.iteration;
            link = SERVER_URL + 'download/' + id.replace(':', '/') + '/' + iteration;

            return fetch(link);
        })
        .then(fileResponse => fileResponse.blob())
        .then(blob => {
            let url = window.URL.createObjectURL(blob);
            let a = document.createElement('a');
            a.href = url;
            a.download = id + '.level'; // Using the original ID as the filename
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
        })
        .catch(error => console.error('Error:', error));
}
